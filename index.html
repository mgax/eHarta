<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>eHarta</title>
    <link href='http://fonts.googleapis.com/css?family=Dancing+Script'
          rel='stylesheet'>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" rel="stylesheet">
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        #control-box {
            position: fixed;
            z-index: 2000;
            right: 0;
            padding: 5px 25px;
            background: #333;
            color: #fff;
            text-align: right;
        }

        #control-box h1, #control-box p {
            margin: 5px 0;
            padding: 0;
        }

        #control-box h1 {
            font-family: 'Dancing Script', cursive, serif;
        }

        #control-box ul#layers {
            list-style: none;
            padding: 5px;
        }

        li.layer-control .ui-slider-horizontal {
            height: 5px;
            width: 50px;
            display: inline-block;
        }

        li.layer-control .ui-slider-handle {
            top: -3px;
            left: -3px;
            height: 9px;
            width: 15px;
        }

        li.layer-control span.label {
            margin: 0 5px;
        }

        #control-box a, #control-box a:visited {
            color: #7cf;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>

<script src="http://grep.ro/quickpub/polymaps-2.5.0/polymaps.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<div id="control-box">
    <h1>eHarta</h1>
    <ul id="layers"></ul>
    <p>
        More info:
        <a href="http://www.earth.unibuc.ro/harti/">maps</a>,
        <a href="https://github.com/alex-morega/eHarta">source code</a>.
    </p>
</div>

<div id="map"></div>

<script>
(function() {
    var po = org.polymaps;

    var svg_container = po.svg("svg");
    $('#map').append(svg_container);
    var pomap = new po.map();
    pomap.container(svg_container);
    pomap.add(po.interact());

    var osm_url = po.url("http://{S}tile.openstreetmap.org/{Z}/{X}/{Y}.png")
                    .hosts(["a.", "b.", "c.", ""]);
    pomap.add(po.image().url(osm_url));
    pomap.center({lon: 25, lat: 46}).zoom(7);


    /*
    var olmap = new OpenLayers.Map('map', {controls: [
        new OpenLayers.Control.Navigation(),
        new OpenLayers.Control.Attribution()
    ]});
    olmap.addLayer(new OpenLayers.Layer.OSM());

    var wgs1984 = new OpenLayers.Projection("EPSG:4326");
    var map_proj = olmap.getProjectionObject();

    var proj_to_map = function(point) {
      return point.clone().transform(wgs1984, map_proj);
    };

    var proj_from_map = function(point) {
      return point.clone().transform(map_proj, wgs1984);
    };

    var center = new OpenLayers.LonLat(25, 45.5)
    olmap.setCenter(proj_to_map(center), 7);

    var layer_austrian = new OpenLayers.Layer.WMS(
        "geospatial:mozaic_austrian - Tiled",
        "http://earth.unibuc.ro:8080/geoserver/geospatial/wms",
        {
            LAYERS: 'geospatial:mozaic_austrian',
            format: 'image/jpeg'
        },
        {
            displayOutsideMaxExtent: true,
            isBaseLayer: false,
            opacity: 0.5
        }
    );
    olmap.addLayer(layer_austrian);

    var austrian_li = $('<li class="layer-control">');
    var austrian_slider = $('<div>').appendTo(austrian_li);
    austrian_slider.slider({
        min: 0,
        max: 1.0,
        step: 0.05,
        range: 'min',
        value: 0.5,
        slide: function(evt, ui) {
            layer_austrian.setOpacity(ui.value);
            console.log(ui.value);
        }
    });
    austrian_slider.appendTo(austrian_li);
    austrian_li.append($('<span class="label">')
                       .text("1910 Austrian maps, 1:200k"));
    austrian_li.appendTo($('ul#layers'));
    */

})();
</script>

</body>
</html>
